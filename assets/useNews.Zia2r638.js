import{a as n}from"./axios.Dq7h7Pqt.js";import{p as l,m as c}from"./vendor.6t78Fp_2.js";const o=void 0;console.log("API_URL:",o);throw new Error("VITE_STRAPI_API_URL is not defined. Please set it in your .env file.");function y(){const s=t=>{var a,e,i;return{id:t.id,title:t.title??"Untitled",description:t.description??"",slug:t.slug??"",image:(a=t.cover)!=null&&a.url?`${o}${t.cover.url}`:"https://via.placeholder.com/300x180?text=No+Image",date:t.publishedAt?new Date(t.publishedAt).toLocaleString(void 0,{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!0}):"",author:t.author?`${t.author.name} (${t.author.email})`:"Unknown",category:((e=t.category)==null?void 0:e.name)??"Uncategorized",blocks:((i=t.blocks)==null?void 0:i.map(r=>r.__component==="shared.rich-text"?{type:"rich-text",body:l.sanitize(c.parse(r.body))}:r.__component==="shared.quote"?{type:"quote",title:r.title??"",body:r.body??""}:null).filter(Boolean))??[]}};return{fetchNews:async()=>{const t=await n.get(`${o}/api/articles?populate=*`);return console.log("Fetched articles:",t.data.data),t.data.data.map(s)},getArticleBySlug:async t=>{const a=await n.get(`${o}/api/articles?filters[slug][$eq]=${t}&populate=*`);console.log("Fetched article by slug:",a.data.data);const e=a.data.data[0];if(!e)throw new Error("Article not found");return s(e)},getAllArticles:async()=>(await(await fetch("http://localhost:1337/api/posts?sort=publishedAt:desc&fields=title,slug")).json()).data.map(e=>({title:e.attributes.title,slug:e.attributes.slug}))}}export{y as u};
